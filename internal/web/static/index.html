<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="theme-color" content="#050505">
<title>teamoon</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Fira+Code:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
<link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="app">
  <header class="topbar">
    <a class="topbar-left" href="#dashboard">
      <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="22" height="22"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      <span class="topbar-brand">teamoon</span>
    </a>
    <div class="topbar-right">
      <span class="topbar-version" id="sb-version"></span>
      <span class="topbar-model" id="sb-model"></span>
      <span class="topbar-uptime" id="sb-uptime"></span>
      <span class="topbar-ctx" id="topbar-ctx"></span>
      <button class="topbar-logout" id="topbar-logout" title="Sign out" aria-label="Sign out" data-i18n-title="topbar.sign_out" style="display:none"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="16" height="16"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg></button>
      <button class="theme-toggle" id="theme-toggle" title="Toggle theme" aria-label="Toggle theme" data-i18n-title="topbar.toggle_theme">
        <svg class="theme-icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        <svg class="theme-icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      </button>
    </div>
  </header>

  <main class="main" id="content"></main>

  <nav class="dock" id="dock">
    <a href="#dashboard" data-view="dashboard" title="Dashboard"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg><span data-i18n="nav.dashboard">Overview</span></a>
    <a href="#queue" data-view="queue" title="Queue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg><span data-i18n="nav.queue">Queue</span></a>
    <a href="#canvas" data-view="canvas" title="Canvas"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg><span data-i18n="nav.board">Board</span></a>
    <a href="#projects" data-view="projects" title="Projects"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg><span data-i18n="nav.projects">Projects</span></a>
    <a href="#logs" data-view="logs" title="Logs"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></svg><span data-i18n="nav.logs">Logs</span></a>
    <a href="#chat" data-view="chat" title="Chat"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg><span data-i18n="nav.chat">Chat</span></a>
    <a href="#jobs" data-view="jobs" title="Jobs"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><span data-i18n="nav.jobs">Jobs</span></a>
    <a href="#config" data-view="config" title="Settings"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg><span data-i18n="nav.config">Config</span></a>
  </nav>
</div>

<div class="modal-overlay" id="modal-add">
  <div class="modal">
    <div class="modal-title" data-i18n="modal.add_task">Add Task</div>
    <div class="modal-field">
      <label data-i18n="modal.project">Project</label>
      <select id="add-project"></select>
    </div>
    <div class="modal-field">
      <label data-i18n="modal.templates">Templates</label>
      <div class="template-row">
        <select id="tmpl-select"><option value="" data-i18n="modal.select_template">— select template —</option></select>
        <button class="btn btn-sm" id="tmpl-edit-btn" onclick="editSelectedTemplate()" style="display:none" title="Edit template" data-i18n="modal.edit">Edit</button>
        <button class="btn btn-sm btn-danger" id="tmpl-del-btn" onclick="deleteSelectedTemplate()" style="display:none" title="Delete template" data-i18n="modal.delete">Del</button>
      </div>
      <div class="template-save-row">
        <input type="text" id="tmpl-name" placeholder="Template name" class="template-name-input" data-i18n-placeholder="modal.template_name_placeholder">
        <button class="btn btn-sm" onclick="saveTemplate()" data-i18n="modal.save_snippet">Save snippet</button>
      </div>
    </div>
    <div class="modal-field">
      <label data-i18n="modal.description">Description</label>
      <textarea id="add-desc" rows="8" placeholder="What needs to be done?" data-i18n-placeholder="modal.description_placeholder"></textarea>
    </div>
    <div class="modal-field">
      <label data-i18n="modal.priority">Priority</label>
      <select id="add-priority">
        <option value="high" data-i18n="modal.priority_high">High</option>
        <option value="med" selected data-i18n="modal.priority_med">Medium</option>
        <option value="low" data-i18n="modal.priority_low">Low</option>
      </select>
    </div>
    <div class="modal-field">
      <label data-i18n="modal.assignee">Assignee</label>
      <select id="add-assignee">
        <option value="human" data-i18n="modal.assignee_human">Human</option>
        <option value="agent" data-i18n="modal.assignee_agent">Agent (Autopilot)</option>
        <option value="system" data-i18n="modal.assignee_system">System</option>
      </select>
    </div>
    <div class="modal-field">
      <label data-i18n="modal.attachments">Attachments</label>
      <div id="task-attach-area">
        <button class="btn btn-sm" type="button" onclick="taskAttachFile()" data-i18n="modal.add_file">Add File</button>
        <div id="task-attach-preview"></div>
      </div>
    </div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('modal-add')" data-i18n="common.cancel">Cancel</button>
      <button class="btn btn-primary" onclick="submitAddTask()" data-i18n="modal.add_task_btn">Add Task</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-prs">
  <div class="modal modal-wide">
    <div class="modal-title" id="prs-title" data-i18n="modal.pull_requests">Pull Requests</div>
    <div id="prs-content"></div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('modal-prs')" data-i18n="common.close">Close</button>
      <button class="btn btn-success" id="btn-merge-dep" style="display:none" onclick="mergeDependabot()" data-i18n="modal.merge_dependabot">Merge Dependabot</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-pr-detail">
  <div class="modal modal-wide">
    <div class="modal-title" id="pr-detail-title" data-i18n="modal.pr_detail">PR Detail</div>
    <div id="pr-detail-content"></div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('modal-pr-detail')" data-i18n="common.close">Close</button>
      <a class="btn btn-primary" id="pr-detail-link" target="_blank" rel="noopener" data-i18n="modal.open_in_github">Open in GitHub</a>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-init">
  <div class="modal">
    <div class="modal-title" data-i18n="modal.new_project">New Project</div>
    <div class="modal-field">
      <label data-i18n="modal.repo_name">Repository Name</label>
      <input type="text" id="init-name" placeholder="my-awesome-project" data-i18n-placeholder="modal.repo_name_placeholder">
    </div>
    <div class="modal-field">
      <label data-i18n="modal.type">Type</label>
      <select id="init-type">
        <option value="python" data-i18n="modal.type_python">Python</option>
        <option value="node" data-i18n="modal.type_node">Node.js</option>
        <option value="go" data-i18n="modal.type_go">Go</option>
      </select>
    </div>
    <div class="modal-field">
      <label data-i18n="modal.initial_version">Initial Version</label>
      <input type="text" id="init-version" value="1.0.0">
    </div>
    <div class="modal-field">
      <label data-i18n="modal.structure">Structure</label>
      <select id="init-structure">
        <option value="separate" data-i18n="modal.structure_separate">Separate repos (backend + frontend)</option>
        <option value="single" data-i18n="modal.structure_single">Single repo</option>
      </select>
    </div>
    <div class="modal-field">
      <label data-i18n="modal.visibility">Visibility</label>
      <select id="init-visibility">
        <option value="private" data-i18n="modal.visibility_private">Private</option>
        <option value="public" data-i18n="modal.visibility_public">Public</option>
      </select>
    </div>
    <div id="init-progress" style="display:none"></div>
    <div class="modal-actions" id="init-actions">
      <button class="btn" onclick="closeModal('modal-init')" data-i18n="common.cancel">Cancel</button>
      <button class="btn btn-primary" id="init-submit" onclick="submitProjectInit()" data-i18n="modal.create_project">Create Project</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-template">
  <div class="modal">
    <div class="modal-title" id="tmpl-modal-title" data-i18n="modal.new_template">New Template</div>
    <div class="modal-field">
      <label data-i18n="modal.name">Name</label>
      <input type="text" id="cfg-tmpl-name" placeholder="Template name" data-i18n-placeholder="modal.template_name_placeholder">
    </div>
    <div class="modal-field">
      <label data-i18n="modal.content">Content</label>
      <textarea id="cfg-tmpl-content" rows="8" placeholder="Template snippet content..." data-i18n-placeholder="modal.template_content_placeholder"></textarea>
    </div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('modal-template')" data-i18n="common.cancel">Cancel</button>
      <button class="btn btn-primary" id="cfg-tmpl-submit" onclick="submitConfigTemplate()" data-i18n="modal.add_template_btn">Add Template</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-job">
  <div class="modal">
    <div class="modal-title" id="job-modal-title" data-i18n="modal.new_job">New Job</div>
    <input type="hidden" id="job-edit-id" value="">
    <div class="modal-field">
      <label data-i18n="modal.name">Name</label>
      <input type="text" id="job-name" placeholder="Daily report" data-i18n-placeholder="modal.job_name_placeholder">
    </div>
    <div class="modal-field">
      <label data-i18n="modal.job_schedule">Schedule (cron)</label>
      <input type="text" id="job-schedule" placeholder="0 */6 * * *" data-i18n-placeholder="modal.job_schedule_placeholder">
      <small class="field-hint" data-i18n="modal.job_schedule_hint">min hour day month weekday — e.g. */30 * * * * = every 30min</small>
    </div>
    <div class="modal-field">
      <label data-i18n="modal.project">Project</label>
      <select id="job-project"></select>
    </div>
    <div class="modal-field">
      <label data-i18n="modal.job_instruction">Instruction</label>
      <textarea id="job-instruction" rows="6" placeholder="What should Claude do?" data-i18n-placeholder="modal.job_instruction_placeholder"></textarea>
    </div>
    <div class="modal-field">
      <label data-i18n="modal.enabled">Enabled</label>
      <select id="job-enabled">
        <option value="true" data-i18n="common.yes">Yes</option>
        <option value="false" data-i18n="common.no">No</option>
      </select>
    </div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('modal-job')" data-i18n="common.cancel">Cancel</button>
      <button class="btn btn-primary" id="job-submit" onclick="submitJob()" data-i18n="modal.create_job">Create Job</button>
    </div>
  </div>
</div>

<script src="/static/marked.min.js"></script>
<script src="/static/purify.min.js"></script>
<script src="/static/i18n.js"></script>
<script src="/static/app.js"></script>
</body>
</html>
