<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="theme-color" content="#050505">
<title>teamoon</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Fira+Code:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
<link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="app">
  <header class="topbar">
    <a class="topbar-left" href="#dashboard">
      <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="22" height="22"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      <span class="topbar-brand">teamoon</span>
    </a>
    <div class="topbar-right">
      <span class="topbar-version" id="sb-version"></span>
      <span class="topbar-model" id="sb-model"></span>
      <span class="topbar-uptime" id="sb-uptime"></span>
      <span class="topbar-ctx" id="topbar-ctx"></span>
      <button class="topbar-logout" id="topbar-logout" title="Sign out" aria-label="Sign out" style="display:none"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="16" height="16"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg></button>
      <button class="theme-toggle" id="theme-toggle" title="Toggle theme" aria-label="Toggle theme">
        <svg class="theme-icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        <svg class="theme-icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      </button>
    </div>
  </header>

  <main class="main" id="content"></main>

  <nav class="dock" id="dock">
    <a href="#dashboard" data-view="dashboard" title="Dashboard"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg><span>Overview</span></a>
    <a href="#queue" data-view="queue" title="Queue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg><span>Queue</span></a>
    <a href="#canvas" data-view="canvas" title="Canvas"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg><span>Board</span></a>
    <a href="#projects" data-view="projects" title="Projects"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg><span>Projects</span></a>
    <a href="#logs" data-view="logs" title="Logs"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></svg><span>Logs</span></a>
    <a href="#chat" data-view="chat" title="Chat"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg><span>Chat</span></a>
    <a href="#jobs" data-view="jobs" title="Jobs"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><span>Jobs</span></a>
    <a href="#config" data-view="config" title="Settings"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg><span>Config</span></a>
  </nav>
</div>

<div class="modal-overlay" id="modal-add">
  <div class="modal">
    <div class="modal-title">Add Task</div>
    <div class="modal-field">
      <label>Project</label>
      <select id="add-project"></select>
    </div>
    <div class="modal-field">
      <label>Templates</label>
      <div class="template-row">
        <select id="tmpl-select"><option value="">— select template —</option></select>
        <button class="btn btn-sm" id="tmpl-edit-btn" onclick="editSelectedTemplate()" style="display:none" title="Edit template">Edit</button>
        <button class="btn btn-sm btn-danger" id="tmpl-del-btn" onclick="deleteSelectedTemplate()" style="display:none" title="Delete template">Del</button>
      </div>
      <div class="template-save-row">
        <input type="text" id="tmpl-name" placeholder="Template name" class="template-name-input">
        <button class="btn btn-sm" onclick="saveTemplate()">Save snippet</button>
      </div>
    </div>
    <div class="modal-field">
      <label>Description</label>
      <textarea id="add-desc" rows="8" placeholder="What needs to be done?"></textarea>
    </div>
    <div class="modal-field">
      <label>Priority</label>
      <select id="add-priority">
        <option value="high">High</option>
        <option value="med" selected>Medium</option>
        <option value="low">Low</option>
      </select>
    </div>
    <div class="modal-field">
      <label>Assignee</label>
      <select id="add-assignee">
        <option value="human">Human</option>
        <option value="agent">Agent (Autopilot)</option>
        <option value="system">System</option>
      </select>
    </div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('modal-add')">Cancel</button>
      <button class="btn btn-primary" onclick="submitAddTask()">Add Task</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-prs">
  <div class="modal modal-wide">
    <div class="modal-title" id="prs-title">Pull Requests</div>
    <div id="prs-content"></div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('modal-prs')">Close</button>
      <button class="btn btn-success" id="btn-merge-dep" style="display:none" onclick="mergeDependabot()">Merge Dependabot</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-pr-detail">
  <div class="modal modal-wide">
    <div class="modal-title" id="pr-detail-title">PR Detail</div>
    <div id="pr-detail-content"></div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('modal-pr-detail')">Close</button>
      <a class="btn btn-primary" id="pr-detail-link" target="_blank" rel="noopener">Open in GitHub</a>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-init">
  <div class="modal">
    <div class="modal-title">New Project</div>
    <div class="modal-field">
      <label>Repository Name</label>
      <input type="text" id="init-name" placeholder="my-awesome-project">
    </div>
    <div class="modal-field">
      <label>Type</label>
      <select id="init-type">
        <option value="python">Python</option>
        <option value="node">Node.js</option>
        <option value="go">Go</option>
      </select>
    </div>
    <div class="modal-field">
      <label>Initial Version</label>
      <input type="text" id="init-version" value="1.0.0">
    </div>
    <div class="modal-field">
      <label>Structure</label>
      <select id="init-structure">
        <option value="separate">Separate repos (backend + frontend)</option>
        <option value="single">Single repo</option>
      </select>
    </div>
    <div class="modal-field">
      <label>Visibility</label>
      <select id="init-visibility">
        <option value="private">Private</option>
        <option value="public">Public</option>
      </select>
    </div>
    <div id="init-progress" style="display:none"></div>
    <div class="modal-actions" id="init-actions">
      <button class="btn" onclick="closeModal('modal-init')">Cancel</button>
      <button class="btn btn-primary" id="init-submit" onclick="submitProjectInit()">Create Project</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-template">
  <div class="modal">
    <div class="modal-title" id="tmpl-modal-title">New Template</div>
    <div class="modal-field">
      <label>Name</label>
      <input type="text" id="cfg-tmpl-name" placeholder="Template name">
    </div>
    <div class="modal-field">
      <label>Content</label>
      <textarea id="cfg-tmpl-content" rows="8" placeholder="Template snippet content..."></textarea>
    </div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('modal-template')">Cancel</button>
      <button class="btn btn-primary" id="cfg-tmpl-submit" onclick="submitConfigTemplate()">Add Template</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-job">
  <div class="modal">
    <div class="modal-title" id="job-modal-title">New Job</div>
    <input type="hidden" id="job-edit-id" value="">
    <div class="modal-field">
      <label>Name</label>
      <input type="text" id="job-name" placeholder="Daily report">
    </div>
    <div class="modal-field">
      <label>Schedule (cron)</label>
      <input type="text" id="job-schedule" placeholder="0 */6 * * *">
      <small class="field-hint">min hour day month weekday — e.g. */30 * * * * = every 30min</small>
    </div>
    <div class="modal-field">
      <label>Project</label>
      <select id="job-project"></select>
    </div>
    <div class="modal-field">
      <label>Instruction</label>
      <textarea id="job-instruction" rows="6" placeholder="What should Claude do?"></textarea>
    </div>
    <div class="modal-field">
      <label>Enabled</label>
      <select id="job-enabled">
        <option value="true">Yes</option>
        <option value="false">No</option>
      </select>
    </div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('modal-job')">Cancel</button>
      <button class="btn btn-primary" id="job-submit" onclick="submitJob()">Create Job</button>
    </div>
  </div>
</div>

<script src="/static/marked.min.js"></script>
<script src="/static/purify.min.js"></script>
<script src="/static/app.js"></script>
</body>
</html>
